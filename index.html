
Ami to tomaky <!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ - ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡¶æ‡¶ú‡ßá‡¶ü ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõí</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hind Siliguri', sans-serif;
        }
        
        :root {
            --primary: #2E7D32;
            --primary-light: #4CAF50;
            --primary-dark: #1B5E20;
            --secondary: #FF9800;
            --light: #F5F5F5;
            --dark: #333333;
            --gray: #757575;
            --light-gray: #E0E0E0;
            --white: #FFFFFF;
            --danger: #F44336;
            --success: #4CAF50;
            --warning: #FF9800;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            direction: ltr;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            padding: 15px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .logo-icon {
            font-size: 1.8rem;
        }
        
        .date-display {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Navigation Styles */
        nav {
            background-color: var(--white);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 70px;
            z-index: 99;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            overflow-x: auto;
            padding: 10px 0;
            scrollbar-width: none;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-links li {
            flex-shrink: 0;
        }
        
        .nav-links a {
            display: block;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--gray);
            font-weight: 500;
            border-radius: 20px;
            margin-right: 5px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .nav-links a.active {
            background-color: var(--primary-light);
            color: var(--white);
        }
        
        .nav-links a i {
            margin-right: 5px;
        }
        
        /* Main Content */
        main {
            padding: 20px 0 80px 0;
            min-height: calc(100vh - 180px);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .page-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .page-title i {
            color: var(--primary);
        }
        
        /* Card Styles */
        .card {
            background-color: var(--white);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 8px;
            font-size: 1rem;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: var(--white);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--white);
        }
        
        .btn-secondary:hover {
            background-color: #F57C00;
        }
        
        .btn-success {
            background-color: var(--success);
            color: var(--white);
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: var(--white);
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-light);
            color: var(--white);
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
        
        .btn-icon {
            padding: 8px 12px;
            min-width: 40px;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .input-group {
            display: flex;
            gap: 10px;
        }
        
        .input-group .form-control {
            flex: 1;
        }
        
        /* Table Styles */
        .table-responsive {
            overflow-x: auto;
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .table th {
            background-color: var(--primary-light);
            color: var(--white);
            padding: 12px 10px;
            text-align: left;
            font-weight: 600;
        }
        
        .table td {
            padding: 12px 10px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        .table .actions {
            display: flex;
            gap: 5px;
        }
        
        /* Summary Cards */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .summary-card {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            color: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .summary-card.orange {
            background: linear-gradient(135deg, var(--warning), #FF5722);
        }
        
        .summary-card.green {
            background: linear-gradient(135deg, #4CAF50, #2E7D32);
        }
        
        .summary-card.red {
            background: linear-gradient(135deg, #F44336, #D32F2F);
        }
        
        .summary-card-title {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .summary-card-value {
            font-size: 2rem;
            font-weight: 700;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: var(--white);
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            background-color: var(--primary);
            color: var(--white);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--white);
            font-size: 1.5rem;
            cursor: pointer;
            line-height: 1;
        }
        
        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 15px 20px;
            background-color: #f9f9f9;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* Shopping Items Grid */
        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .item-card {
            background-color: var(--white);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .item-card.selected {
            border-color: var(--primary);
            background-color: rgba(46, 125, 50, 0.05);
        }
        
        .item-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .item-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        /* No Data Message */
        .no-data {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray);
        }
        
        .no-data i {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }
        
        .no-data p {
            font-size: 1.1rem;
        }
        
        /* Footer Navigation */
        .footer-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--white);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            padding: 10px 0;
            z-index: 100;
        }
        
        .footer-nav-links {
            display: flex;
            justify-content: space-around;
            list-style: none;
        }
        
        .footer-nav-links a {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.8rem;
            transition: color 0.3s ease;
        }
        
        .footer-nav-links a.active {
            color: var(--primary);
        }
        
        .footer-nav-links i {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            .container {
                max-width: 750px;
                padding: 0 15px;
            }
            
            .nav-links {
                justify-content: center;
            }
            
            .items-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }
        
        @media (min-width: 992px) {
            .container {
                max-width: 970px;
            }
        }
        
        @media (min-width: 1200px) {
            .container {
                max-width: 1140px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üõí</div>
                    <h1>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</h1>
                </div>
                <div class="date-display" id="currentDate">...</div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <ul class="nav-links">
                <li><a href="#dashboard" class="active"><i class="fas fa-home"></i> ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</a></li>
                <li><a href="#new-shopping"><i class="fas fa-cart-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</a></li>
                <li><a href="#shopping-list"><i class="fas fa-list"></i> ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</a></li>
                <li><a href="#products"><i class="fas fa-shopping-basket"></i> ‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ</a></li>
                <li><a href="#reports"><i class="fas fa-chart-bar"></i> ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Dashboard Page -->
        <section id="dashboard-page" class="page active">
            <h2 class="page-title"><i class="fas fa-home"></i> ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
            
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="summary-card-title">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ñ‡¶∞‡¶ö</div>
                    <div class="summary-card-value" id="todayCost">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                </div>
                <div class="summary-card orange">
                    <div class="summary-card-title">‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</div>
                    <div class="summary-card-value" id="monthCost">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                </div>
                <div class="summary-card green">
                    <div class="summary-card-title">‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</div>
                    <div class="summary-card-value" id="totalShopping">‡ß¶</div>
                </div>
                <div class="summary-card red">
                    <div class="summary-card-title">‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶ñ‡¶∞‡¶ö</div>
                    <div class="summary-card-value" id="maxCost">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                    <a href="#new-shopping" class="btn btn-primary btn-small">‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ <i class="fas fa-plus"></i></a>
                </div>
                <div class="table-responsive">
                    <table class="table" id="recentShoppingTable">
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶™‡¶£‡ßç‡¶Ø</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                <th>‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ</th>
                            </tr>
                        </thead>
                        <tbody id="recentShoppingBody">
                            <!-- Recent shopping data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                <div class="no-data" id="noRecentData" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶∏‡¶∞‡ßç‡¶¨‡¶æ‡¶ß‡¶ø‡¶ï ‡¶ï‡ßá‡¶®‡¶æ ‡¶™‡¶£‡ßç‡¶Ø</h3>
                </div>
                <div class="table-responsive">
                    <table class="table" id="topProductsTable">
                        <thead>
                            <tr>
                                <th>‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                            </tr>
                        </thead>
                        <tbody id="topProductsBody">
                            <!-- Top products data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                <div class="no-data" id="noProductsData" style="display: none;">
                    <i class="fas fa-apple-alt"></i>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡ßá‡¶®‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§</p>
                </div>
            </div>
        </section>

        <!-- New Shopping Page -->
        <section id="new-shopping-page" class="page">
            <h2 class="page-title"><i class="fas fa-cart-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</h3>
                </div>
                <div class="card-body">
                    <form id="shoppingForm">
                        <div class="form-group">
                            <label class="form-label" for="shoppingDate">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                            <input type="date" id="shoppingDate" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="shoppingName">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)</label>
                            <input type="text" id="shoppingName" class="form-control" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶á‡¶§‡ßç‡¶Ø‡¶æ‡¶¶‡¶ø">
                        </div>
                        
                        <div class="card-header" style="padding: 0; margin: 20px 0 15px 0;">
                            <h3 class="card-title">‡¶™‡¶£‡ßç‡¶Ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                            <button type="button" class="btn btn-primary btn-small" id="addProductBtn">
                                <i class="fas fa-plus"></i> ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó
                            </button>
                        </div>
                        
                        <div id="productsContainer">
                            <!-- Product rows will be added here dynamically -->
                        </div>
                        
                        <div class="form-group" style="text-align: center; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary" style="padding: 12px 30px; font-size: 1.1rem;">
                                <i class="fas fa-save"></i> ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Shopping List Page -->
        <section id="shopping-list-page" class="page">
            <h2 class="page-title"><i class="fas fa-list"></i> ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶∏‡¶ï‡¶≤ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                    <div class="input-group" style="max-width: 300px;">
                        <input type="month" id="monthFilter" class="form-control" style="flex: 1;">
                        <button class="btn btn-outline btn-small" id="filterBtn">
                            <i class="fas fa-filter"></i> ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞
                        </button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table" id="allShoppingTable">
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                <th>‡¶ï‡¶æ‡¶∞‡ßç‡¶Ø‡¶ï‡ßç‡¶∞‡¶Æ</th>
                            </tr>
                        </thead>
                        <tbody id="allShoppingBody">
                            <!-- All shopping data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                <div class="no-data" id="noAllShoppingData" style="display: none;">
                    <i class="fas fa-shopping-cart"></i>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
                </div>
            </div>
        </section>

        <!-- Products Management Page -->
        <section id="products-page" class="page">
            <h2 class="page-title"><i class="fas fa-shopping-basket"></i> ‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶∞‡¶ø‡¶ö‡¶æ‡¶≤‡¶®‡¶æ</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶£‡ßç‡¶Ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
                    <button class="btn btn-primary btn-small" id="addNewProductBtn">
                        <i class="fas fa-plus"></i> ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø
                    </button>
                </div>
                
                <div class="items-grid" id="productsGrid">
                    <!-- Product items will be loaded here dynamically -->
                </div>
                
                <div class="no-data" id="noProductsList" style="display: none;">
                    <i class="fas fa-apple-alt"></i>
                    <p>‡¶ï‡ßã‡¶®‡ßã ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®!</p>
                </div>
            </div>
        </section>

        <!-- Reports Page -->
        <section id="reports-page" class="page">
            <h2 class="page-title"><i class="fas fa-chart-bar"></i> ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">‡¶Æ‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                    <div class="input-group" style="max-width: 300px;">
                        <input type="month" id="reportMonth" class="form-control" style="flex: 1;">
                        <button class="btn btn-primary btn-small" id="generateReportBtn">
                            <i class="fas fa-chart-line"></i> ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
                        </button>
                    </div>
                </div>
                
                <div id="reportContent" style="display: none;">
                    <div class="summary-cards">
                        <div class="summary-card">
                            <div class="summary-card-title">‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</div>
                            <div class="summary-card-value" id="reportTotalShopping">‡ß¶</div>
                        </div>
                        <div class="summary-card orange">
                            <div class="summary-card-title">‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</div>
                            <div class="summary-card-value" id="reportTotalCost">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                        </div>
                        <div class="summary-card green">
                            <div class="summary-card-title">‡¶ó‡ßú ‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶ñ‡¶∞‡¶ö</div>
                            <div class="summary-card-value" id="reportAvgDailyCost">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <div class="card-header">
                            <h3 class="card-title">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶™‡¶£‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∂‡ßç‡¶≤‡ßá‡¶∑‡¶£</h3>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="reportProductsTable">
                                <thead>
                                    <tr>
                                        <th>‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                        <th>‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                        <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                        <th>‡¶ó‡ßú ‡¶¶‡¶æ‡¶Æ (‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ï‡ßá‡¶ú‡¶ø)</th>
                                    </tr>
                                </thead>
                                <tbody id="reportProductsBody">
                                    <!-- Report products data will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        <div class="no-data" id="noReportData" style="display: none;">
                            <i class="fas fa-chart-pie"></i>
                            <p>‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§</p>
                        </div>
                    </div>
                </div>
                
                <div class="no-data" id="selectMonthPrompt">
                    <i class="fas fa-calendar-alt"></i>
                    <p>‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶Æ‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Navigation -->
    <div class="footer-nav">
        <div class="container">
            <ul class="footer-nav-links">
                <li><a href="#dashboard" class="active"><i class="fas fa-home"></i> ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</a></li>
                <li><a href="#new-shopping"><i class="fas fa-cart-plus"></i> ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</a></li>
                <li><a href="#shopping-list"><i class="fas fa-list"></i> ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</a></li>
                <li><a href="#products"><i class="fas fa-shopping-basket"></i> ‡¶™‡¶£‡ßç‡¶Ø</a></li>
                <li><a href="#reports"><i class="fas fa-chart-bar"></i> ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</a></li>
            </ul>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Add New Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newProductForm">
                    <div class="form-group">
                        <label class="form-label" for="productName">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                        <input type="text" id="productName" class="form-control" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ü‡¶Æ‡ßá‡¶ü‡ßã, ‡¶Æ‡¶æ‡¶õ, ‡¶Æ‡¶æ‡¶Ç‡¶∏" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productCategory">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø</label>
                        <select id="productCategory" class="form-control">
                            <option value="‡¶∏‡¶¨‡¶ú‡¶ø">‡¶∏‡¶¨‡¶ú‡¶ø</option>
                            <option value="‡¶Æ‡¶∏‡¶≤‡¶æ">‡¶Æ‡¶∏‡¶≤‡¶æ</option>
                            <option value="‡¶°‡¶æ‡¶≤">‡¶°‡¶æ‡¶≤</option>
                            <option value="‡¶§‡ßá‡¶≤">‡¶§‡ßá‡¶≤</option>
                            <option value="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="productUnit">‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶è‡¶ï‡¶ï</label>
                        <select id="productUnit" class="form-control">
                            <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø (kg)</option>
                            <option value="gm">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ (gm)</option>
                            <option value="piece">‡¶™‡¶ø‡¶∏ (piece)</option>
                            <option value="liter">‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞ (liter)</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelProductBtn">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
                <button class="btn btn-primary" id="saveProductBtn">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <!-- Edit Shopping Modal -->
    <div class="modal" id="editShoppingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶æ‡¶¶‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
                <button class="modal-close" id="closeEditModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Edit form will be loaded here dynamically -->
            </div>
        </div>
    </div>

    <!-- View Shopping Details Modal -->
    <div class="modal" id="viewShoppingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</h3>
                <button class="modal-close" id="closeViewModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Shopping details will be loaded here dynamically -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="closeViewBtn">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Default products list
        const defaultProducts = [
            { id: 1, name: "‡¶ï‡¶æ‡¶Å‡¶ö‡¶æ‡¶Æ‡¶∞‡¶ø‡¶ö", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 2, name: "‡¶Ü‡¶≤‡ßÅ", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 3, name: "‡¶™‡¶ü‡¶≤", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 4, name: "‡¶´‡ßÅ‡¶≤‡¶ï‡¶™‡¶ø", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "piece" },
            { id: 5, name: "‡¶â‡¶∏‡ßç‡¶§‡¶æ", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 6, name: "‡¶≤‡¶æ‡¶â", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 7, name: "‡¶∏‡¶ø‡¶Æ", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 8, name: "‡¶¨‡¶æ‡¶Å‡¶ß‡¶æ‡¶ï‡¶™‡¶ø", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "piece" },
            { id: 9, name: "‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø ‡¶ï‡ßÅ‡¶Æ‡¶°‡¶º‡¶æ", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 10, name: "‡¶Æ‡ßÅ‡¶≤‡¶æ", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 11, name: "‡¶™‡ßá‡¶Å‡¶™‡ßá", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 12, name: "‡¶∂‡¶æ‡¶ï‡¶∏‡¶¨‡¶ú‡¶ø", category: "‡¶∏‡¶¨‡¶ú‡¶ø", unit: "kg" },
            { id: 13, name: "‡¶∞‡¶∏‡ßÅ‡¶®", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "kg" },
            { id: 14, name: "‡¶™‡ßá‡¶Å‡¶Ø‡¶º‡¶æ‡¶ú", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "kg" },
            { id: 15, name: "‡¶Ü‡¶¶‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "kg" },
            { id: 16, name: "‡¶ú‡¶ø‡¶∞‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 17, name: "‡¶ó‡¶∞‡¶Æ ‡¶Æ‡¶∏‡¶≤‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 18, name: "‡¶π‡¶≤‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶ó‡ßÅ‡¶Å‡¶°‡¶º‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 19, name: "‡¶Æ‡¶∞‡¶ø‡¶ö‡ßá‡¶∞ ‡¶ó‡ßÅ‡¶Å‡¶°‡¶º‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 20, name: "‡¶∏‡¶ú‡ßá‡¶∞ ‡¶ó‡ßÅ‡¶Å‡¶°‡¶º‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 21, name: "‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø‡¶∞ ‡¶Æ‡¶∏‡¶≤‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 22, name: "‡¶ó‡¶∞‡ßÅ‡¶∞ ‡¶Æ‡¶∏‡¶≤‡¶æ", category: "‡¶Æ‡¶∏‡¶≤‡¶æ", unit: "gm" },
            { id: 23, name: "‡¶°‡¶æ‡¶≤ (‡¶Æ‡¶∏‡ßÅ‡¶∞)", category: "‡¶°‡¶æ‡¶≤", unit: "kg" },
            { id: 24, name: "‡¶°‡¶æ‡¶≤ (‡¶¨‡ßÅ‡¶ü)", category: "‡¶°‡¶æ‡¶≤", unit: "kg" },
            { id: 25, name: "‡¶°‡¶æ‡¶≤ (‡¶Æ‡ßÅ‡¶ó)", category: "‡¶°‡¶æ‡¶≤", unit: "kg" },
            { id: 26, name: "‡¶°‡¶æ‡¶≤ (‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞)", category: "‡¶°‡¶æ‡¶≤", unit: "kg" },
            { id: 27, name: "‡¶∏‡ßã‡¶Ø‡¶º‡¶æ‡¶¨‡¶ø‡¶® ‡¶§‡ßá‡¶≤", category: "‡¶§‡ßá‡¶≤", unit: "liter" },
            { id: 28, name: "‡¶∏‡¶∞‡¶ø‡¶∑‡¶æ‡¶∞ ‡¶§‡ßá‡¶≤", category: "‡¶§‡ßá‡¶≤", unit: "liter" },
            { id: 29, name: "‡¶°‡¶ø‡¶Æ", category: "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", unit: "piece" },
            { id: 30, name: "‡¶≠‡ßÄ‡¶Æ ‡¶∏‡¶æ‡¶¨‡¶æ‡¶®", category: "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", unit: "piece" },
            { id: 31, name: "‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ì‡¶Ø‡¶º‡¶æ‡¶∂", category: "‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø", unit: "piece" }
        ];

        // Initialize data
        let products = JSON.parse(localStorage.getItem('marketProducts')) || defaultProducts;
        let shoppingList = JSON.parse(localStorage.getItem('marketShoppingList')) || [];
        let currentShoppingId = null;
        let productCounter = products.length > 0 ? Math.max(...products.map(p => p.id)) : 31;

        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const navLinks = document.querySelectorAll('.nav-links a');
        const footerNavLinks = document.querySelectorAll('.footer-nav-links a');
        const currentDateElement = document.getElementById('currentDate');
        const addProductBtn = document.getElementById('addProductBtn');
        const productsContainer = document.getElementById('productsContainer');
        const shoppingForm = document.getElementById('shoppingForm');
        const shoppingDate = document.getElementById('shoppingDate');
        const addNewProductBtn = document.getElementById('addNewProductBtn');
        const addProductModal = document.getElementById('addProductModal');
        const closeProductModal = document.getElementById('closeProductModal');
        const cancelProductBtn = document.getElementById('cancelProductBtn');
        const saveProductBtn = document.getElementById('saveProductBtn');
        const newProductForm = document.getElementById('newProductForm');
        const productsGrid = document.getElementById('productsGrid');
        const editShoppingModal = document.getElementById('editShoppingModal');
        const closeEditModal = document.getElementById('closeEditModal');
        const viewShoppingModal = document.getElementById('viewShoppingModal');
        const closeViewModal = document.getElementById('closeViewModal');
        const closeViewBtn = document.getElementById('closeViewBtn');
        const monthFilter = document.getElementById('monthFilter');
        const filterBtn = document.getElementById('filterBtn');
        const reportMonth = document.getElementById('reportMonth');
        const generateReportBtn = document.getElementById('generateReportBtn');
        const reportContent = document.getElementById('reportContent');
        const selectMonthPrompt = document.getElementById('selectMonthPrompt');

        // Initialize the app
        function initApp() {
            // Set current date
            const today = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            currentDateElement.textContent = today.toLocaleDateString('bn-BD', options);
            
            // Set default date in shopping form to today
            shoppingDate.valueAsDate = today;
            
            // Set default month in filter to current month
            const currentMonth = today.toISOString().slice(0, 7);
            monthFilter.value = currentMonth;
            reportMonth.value = currentMonth;
            
            // Initialize product rows
            addProductRow();
            
            // Load products grid
            loadProductsGrid();
            
            // Load dashboard data
            loadDashboardData();
            
            // Load shopping list
            loadShoppingList();
            
            // Initialize event listeners
            initEventListeners();
        }

        // Initialize event listeners
        function initEventListeners() {
            // Navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href').substring(1);
                    
                    // Update active states
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    footerNavLinks.forEach(l => {
                        if (l.getAttribute('href') === this.getAttribute('href')) {
                            l.classList.add('active');
                        } else {
                            l.classList.remove('active');
                        }
                    });
                    
                    // Show target page
                    pages.forEach(page => {
                        if (page.id === `${target}-page`) {
                            page.classList.add('active');
                        } else {
                            page.classList.remove('active');
                        }
                    });
                });
            });
            
            // Footer navigation links
            footerNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href').substring(1);
                    
                    // Update active states
                    footerNavLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    navLinks.forEach(l => {
                        if (l.getAttribute('href') === this.getAttribute('href')) {
                            l.classList.add('active');
                        } else {
                            l.classList.remove('active');
                        }
                    });
                    
                    // Show target page
                    pages.forEach(page => {
                        if (page.id === `${target}-page`) {
                            page.classList.add('active');
                        } else {
                            page.classList.remove('active');
                        }
                    });
                });
            });
            
            // Add product row button
            addProductBtn.addEventListener('click', addProductRow);
            
            // Shopping form submission
            shoppingForm.addEventListener('submit', saveShopping);
            
            // Add new product button
            addNewProductBtn.addEventListener('click', () => {
                addProductModal.classList.add('active');
            });
            
            // Close product modal buttons
            closeProductModal.addEventListener('click', () => {
                addProductModal.classList.remove('active');
                newProductForm.reset();
            });
            
            cancelProductBtn.addEventListener('click', () => {
                addProductModal.classList.remove('active');
                newProductForm.reset();
            });
            
            // Save product button
            saveProductBtn.addEventListener('click', saveNewProduct);
            
            // Close edit modal
            closeEditModal.addEventListener('click', () => {
                editShoppingModal.classList.remove('active');
            });
            
            // Close view modal
            closeViewModal.addEventListener('click', () => {
                viewShoppingModal.classList.remove('active');
            });
            
            closeViewBtn.addEventListener('click', () => {
                viewShoppingModal.classList.remove('active');
            });
            
            // Filter button
            filterBtn.addEventListener('click', loadShoppingList);
            
            // Generate report button
            generateReportBtn.addEventListener('click', generateReport);
        }

        // Add product row to shopping form
        function addProductRow() {
            const row = document.createElement('div');
            row.className = 'product-row';
            row.innerHTML = `
                <div class="form-group" style="display: flex; gap: 10px; align-items: flex-end;">
                    <div style="flex: 2;">
                        <label class="form-label">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                        <select class="form-control product-select" required>
                            <option value="">‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                            ${products.map(product => `<option value="${product.id}">${product.name}</option>`).join('')}
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
                        <input type="number" class="form-control quantity" step="0.01" min="0" required>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">‡¶è‡¶ï‡¶ï</label>
                        <select class="form-control unit">
                            <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø</option>
                            <option value="gm">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
                            <option value="piece">‡¶™‡¶ø‡¶∏</option>
                            <option value="liter">‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞</option>
                        </select>
                    </div>
                    <div style="flex: 1.5;">
                        <label class="form-label">‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ)</label>
                        <input type="number" class="form-control price" min="0" required>
                    </div>
                    <div style="display: flex; align-items: center; margin-bottom: 5px;">
                        <button type="button" class="btn btn-danger btn-icon remove-product-btn" style="padding: 10px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            
            productsContainer.appendChild(row);
            
            // Add event listener to remove button
            const removeBtn = row.querySelector('.remove-product-btn');
            removeBtn.addEventListener('click', function() {
                if (document.querySelectorAll('.product-row').length > 1) {
                    row.remove();
                } else {
                    alert('‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶¨‡¶∂‡ßç‡¶Ø‡¶ï!');
                }
            });
            
            // Add event listener to product select to update unit
            const productSelect = row.querySelector('.product-select');
            const unitSelect = row.querySelector('.unit');
            
            productSelect.addEventListener('change', function() {
                const productId = parseInt(this.value);
                if (productId) {
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        // Set the unit based on product's default unit
                        unitSelect.value = product.unit;
                    }
                }
            });
        }

        // Save new shopping
        function saveShopping(e) {
            e.preventDefault();
            
            // Get shopping data
            const date = shoppingDate.value;
            const name = document.getElementById('shoppingName').value || `‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ - ${new Date(date).toLocaleDateString('bn-BD')}`;
            
            // Get product rows
            const productRows = document.querySelectorAll('.product-row');
            const items = [];
            let totalCost = 0;
            
            for (const row of productRows) {
                const productSelect = row.querySelector('.product-select');
                const quantityInput = row.querySelector('.quantity');
                const unitSelect = row.querySelector('.unit');
                const priceInput = row.querySelector('.price');
                
                const productId = parseInt(productSelect.value);
                const product = products.find(p => p.id === productId);
                
                if (!product) {
                    alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                    return;
                }
                
                const quantity = parseFloat(quantityInput.value);
                const unit = unitSelect.value;
                const price = parseFloat(priceInput.value);
                
                if (!quantity || !price) {
                    alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶ì ‡¶¶‡¶æ‡¶Æ ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
                    return;
                }
                
                items.push({
                    productId,
                    productName: product.name,
                    quantity,
                    unit,
                    price
                });
                
                totalCost += price;
            }
            
            // Create shopping object
            const shopping = {
                id: Date.now(),
                date,
                name,
                items,
                totalCost
            };
            
            // Add to shopping list
            shoppingList.unshift(shopping);
            
            // Save to localStorage
            localStorage.setItem('marketShoppingList', JSON.stringify(shoppingList));
            
            // Reset form
            shoppingForm.reset();
            shoppingDate.valueAsDate = new Date();
            
            // Clear product rows and add one fresh row
            productsContainer.innerHTML = '';
            addProductRow();
            
            // Show success message
            alert('‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            
            // Update dashboard and shopping list
            loadDashboardData();
            loadShoppingList();
            
            // Navigate to dashboard
            document.querySelector('a[href="#dashboard"]').click();
        }

        // Load products grid
        function loadProductsGrid() {
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                document.getElementById('noProductsList').style.display = 'block';
                return;
            }
            
            document.getElementById('noProductsList').style.display = 'none';
            
            // Group products by category
            const groupedProducts = {};
            products.forEach(product => {
                if (!groupedProducts[product.category]) {
                    groupedProducts[product.category] = [];
                }
                groupedProducts[product.category].push(product);
            });
            
            // Create cards for each product
            for (const category in groupedProducts) {
                // Add category title
                const categoryTitle = document.createElement('h3');
                categoryTitle.textContent = category;
                categoryTitle.style.margin = '20px 0 10px 0';
                categoryTitle.style.color = 'var(--primary-dark)';
                productsGrid.appendChild(categoryTitle);
                
                // Add products in this category
                groupedProducts[category].forEach(product => {
                    const card = document.createElement('div');
                    card.className = 'item-card';
                    card.dataset.id = product.id;
                    
                    // Set icon based on category
                    let icon = 'fa-apple-alt';
                    if (category === '‡¶Æ‡¶∏‡¶≤‡¶æ') icon = 'fa-pepper-hot';
                    if (category === '‡¶°‡¶æ‡¶≤') icon = 'fa-seedling';
                    if (category === '‡¶§‡ßá‡¶≤') icon = 'fa-oil-can';
                    if (category === '‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø') icon = 'fa-shopping-basket';
                    
                    card.innerHTML = `
                        <div class="item-icon"><i class="fas ${icon}"></i></div>
                        <div class="item-name">${product.name}</div>
                        <div style="font-size: 0.8rem; color: var(--gray); margin-top: 5px;">${product.unit}</div>
                        <button class="btn btn-danger btn-small delete-product-btn" style="margin-top: 10px; padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-trash"></i> ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                        </button>
                    `;
                    
                    productsGrid.appendChild(card);
                    
                    // Add event listener to delete button
                    const deleteBtn = card.querySelector('.delete-product-btn');
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        deleteProduct(product.id);
                    });
                });
            }
        }

        // Save new product
        function saveNewProduct() {
            const name = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value;
            const unit = document.getElementById('productUnit').value;
            
            if (!name) {
                alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
                return;
            }
            
            // Check if product already exists
            if (products.some(p => p.name.toLowerCase() === name.toLowerCase())) {
                alert('‡¶è‡¶á ‡¶™‡¶£‡ßç‡¶Ø‡¶ü‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡ßü ‡¶Ü‡¶õ‡ßá!');
                return;
            }
            
            // Create new product
            productCounter++;
            const newProduct = {
                id: productCounter,
                name,
                category,
                unit
            };
            
            // Add to products array
            products.push(newProduct);
            
            // Save to localStorage
            localStorage.setItem('marketProducts', JSON.stringify(products));
            
            // Close modal and reset form
            addProductModal.classList.remove('active');
            newProductForm.reset();
            
            // Reload products grid
            loadProductsGrid();
            
            // Show success message
            alert('‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
        }

        // Delete product
        function deleteProduct(id) {
            if (defaultProducts.some(p => p.id === id)) {
                alert('‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶™‡¶£‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ! ‡¶Ü‡¶™‡¶®‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶™‡¶£‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®‡•§');
                return;
            }
            
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶™‡¶£‡ßç‡¶Ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                // Remove product from array
                products = products.filter(p => p.id !== id);
                
                // Save to localStorage
                localStorage.setItem('marketProducts', JSON.stringify(products));
                
                // Reload products grid
                loadProductsGrid();
                
                // Show success message
                alert('‡¶™‡¶£‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
        }

        // Load dashboard data
        function loadDashboardData() {
            const today = new Date().toISOString().slice(0, 10);
            
            // Calculate today's cost
            const todayShopping = shoppingList.filter(s => s.date === today);
            const todayCost = todayShopping.reduce((sum, s) => sum + s.totalCost, 0);
            document.getElementById('todayCost').textContent = `${todayCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ`;
            
            // Calculate this month's cost
            const currentMonth = new Date().toISOString().slice(0, 7);
            const monthShopping = shoppingList.filter(s => s.date.startsWith(currentMonth));
            const monthCost = monthShopping.reduce((sum, s) => sum + s.totalCost, 0);
            document.getElementById('monthCost').textContent = `${monthCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ`;
            
            // Total shopping count
            document.getElementById('totalShopping').textContent = shoppingList.length;
            
            // Max cost
            const maxCost = shoppingList.length > 0 ? Math.max(...shoppingList.map(s => s.totalCost)) : 0;
            document.getElementById('maxCost').textContent = `${maxCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ`;
            
            // Load recent shopping
            loadRecentShopping();
            
            // Load top products
            loadTopProducts();
        }

        // Load recent shopping
        function loadRecentShopping() {
            const recentShoppingBody = document.getElementById('recentShoppingBody');
            const noRecentData = document.getElementById('noRecentData');
            
            if (shoppingList.length === 0) {
                recentShoppingBody.innerHTML = '';
                document.getElementById('recentShoppingTable').style.display = 'none';
                noRecentData.style.display = 'block';
                return;
            }
            
            document.getElementById('recentShoppingTable').style.display = 'table';
            noRecentData.style.display = 'none';
            
            // Get recent 5 shopping
            const recentShopping = shoppingList.slice(0, 5);
            
            recentShoppingBody.innerHTML = recentShopping.map(shopping => `
                <tr>
                    <td>${formatDate(shopping.date)}</td>
                    <td>${shopping.items.length}</td>
                    <td>${shopping.totalCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                    <td class="actions">
                        <button class="btn btn-outline btn-small view-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-outline btn-small edit-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-small delete-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add event listeners to buttons
            document.querySelectorAll('.view-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    viewShopping(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('.edit-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    editShopping(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('.delete-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    deleteShopping(parseInt(this.dataset.id));
                });
            });
        }

        // Load top products
        function loadTopProducts() {
            const topProductsBody = document.getElementById('topProductsBody');
            const noProductsData = document.getElementById('noProductsData');
            
            if (shoppingList.length === 0) {
                topProductsBody.innerHTML = '';
                document.getElementById('topProductsTable').style.display = 'none';
                noProductsData.style.display = 'block';
                return;
            }
            
            document.getElementById('topProductsTable').style.display = 'table';
            noProductsData.style.display = 'none';
            
            // Calculate product totals
            const productTotals = {};
            
            shoppingList.forEach(shopping => {
                shopping.items.forEach(item => {
                    if (!productTotals[item.productName]) {
                        productTotals[item.productName] = {
                            quantity: 0,
                            cost: 0
                        };
                    }
                    
                    // Convert all to kg for comparison
                    let quantityInKg = item.quantity;
                    if (item.unit === 'gm') quantityInKg = item.quantity / 1000;
                    if (item.unit === 'piece') quantityInKg = item.quantity; // Keep as is for pieces
                    
                    productTotals[item.productName].quantity += quantityInKg;
                    productTotals[item.productName].cost += item.price;
                });
            });
            
            // Convert to array and sort by cost
            const topProducts = Object.entries(productTotals)
                .map(([name, data]) => ({
                    name,
                    quantity: data.quantity,
                    cost: data.cost
                }))
                .sort((a, b) => b.cost - a.cost)
                .slice(0, 5);
            
            topProductsBody.innerHTML = topProducts.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td>${product.quantity.toFixed(2)} ${product.quantity >= 1 ? '‡¶ï‡ßá‡¶ú‡¶ø' : '‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ'}</td>
                    <td>${product.cost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                </tr>
            `).join('');
        }

        // Load shopping list
        function loadShoppingList() {
            const allShoppingBody = document.getElementById('allShoppingBody');
            const noAllShoppingData = document.getElementById('noAllShoppingData');
            const selectedMonth = monthFilter.value;
            
            // Filter by month if selected
            let filteredShopping = shoppingList;
            if (selectedMonth) {
                filteredShopping = shoppingList.filter(s => s.date.startsWith(selectedMonth));
            }
            
            if (filteredShopping.length === 0) {
                allShoppingBody.innerHTML = '';
                document.getElementById('allShoppingTable').style.display = 'none';
                noAllShoppingData.style.display = 'block';
                return;
            }
            
            document.getElementById('allShoppingTable').style.display = 'table';
            noAllShoppingData.style.display = 'none';
            
            allShoppingBody.innerHTML = filteredShopping.map(shopping => `
                <tr>
                    <td>${formatDate(shopping.date)}</td>
                    <td>${shopping.name}</td>
                    <td>${shopping.items.length}</td>
                    <td>${shopping.totalCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                    <td class="actions">
                        <button class="btn btn-outline btn-small view-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="btn btn-outline btn-small edit-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-small delete-shopping-btn" data-id="${shopping.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
            
            // Add event listeners to buttons
            document.querySelectorAll('.view-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    viewShopping(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('.edit-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    editShopping(parseInt(this.dataset.id));
                });
            });
            
            document.querySelectorAll('.delete-shopping-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    deleteShopping(parseInt(this.dataset.id));
                });
            });
        }

        // View shopping details
        function viewShopping(id) {
            const shopping = shoppingList.find(s => s.id === id);
            if (!shopping) return;
            
            const modalBody = document.querySelector('#viewShoppingModal .modal-body');
            modalBody.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--primary); margin-bottom: 10px;">${shopping.name}</h4>
                    <p><strong>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${formatDate(shopping.date)}</p>
                    <p><strong>‡¶Æ‡ßã‡¶ü ‡¶™‡¶£‡ßç‡¶Ø:</strong> ${shopping.items.length} ‡¶ü‡¶ø</p>
                    <p><strong>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö:</strong> <span style="font-size: 1.2rem; font-weight: bold; color: var(--primary);">${shopping.totalCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</span></p>
                </div>
                
                <h4 style="margin-bottom: 15px; color: var(--primary-dark);">‡¶™‡¶£‡ßç‡¶Ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h4>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                <th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                <th>‡¶¶‡¶æ‡¶Æ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${shopping.items.map(item => `
                                <tr>
                                    <td>${item.productName}</td>
                                    <td>${item.quantity} ${getUnitName(item.unit)}</td>
                                    <td>${item.price.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            viewShoppingModal.classList.add('active');
        }

        // Edit shopping
        function editShopping(id) {
            const shopping = shoppingList.find(s => s.id === id);
            if (!shopping) return;
            
            currentShoppingId = id;
            const modalBody = document.querySelector('#editShoppingModal .modal-body');
            
            modalBody.innerHTML = `
                <form id="editShoppingForm">
                    <div class="form-group">
                        <label class="form-label" for="editShoppingDate">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                        <input type="date" id="editShoppingDate" class="form-control" value="${shopping.date}" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="editShoppingName">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                        <input type="text" id="editShoppingName" class="form-control" value="${shopping.name}" required>
                    </div>
                    
                    <h4 style="margin: 20px 0 15px 0; color: var(--primary-dark);">‡¶™‡¶£‡ßç‡¶Ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h4>
                    <div id="editProductsContainer">
                        ${shopping.items.map((item, index) => `
                            <div class="edit-product-row" style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--light-gray);">
                                <div style="display: flex; gap: 10px;">
                                    <div style="flex: 2;">
                                        <label class="form-label">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                                        <select class="form-control edit-product-select" required>
                                            <option value="">‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                                            ${products.map(product => `
                                                <option value="${product.id}" ${product.name === item.productName ? 'selected' : ''}>${product.name}</option>
                                            `).join('')}
                                        </select>
                                    </div>
                                    <div style="flex: 1;">
                                        <label class="form-label">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
                                        <input type="number" class="form-control edit-quantity" value="${item.quantity}" step="0.01" min="0" required>
                                    </div>
                                    <div style="flex: 1;">
                                        <label class="form-label">‡¶è‡¶ï‡¶ï</label>
                                        <select class="form-control edit-unit">
                                            <option value="kg" ${item.unit === 'kg' ? 'selected' : ''}>‡¶ï‡ßá‡¶ú‡¶ø</option>
                                            <option value="gm" ${item.unit === 'gm' ? 'selected' : ''}>‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
                                            <option value="piece" ${item.unit === 'piece' ? 'selected' : ''}>‡¶™‡¶ø‡¶∏</option>
                                            <option value="liter" ${item.unit === 'liter' ? 'selected' : ''}>‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞</option>
                                        </select>
                                    </div>
                                    <div style="flex: 1.5;">
                                        <label class="form-label">‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ)</label>
                                        <input type="number" class="form-control edit-price" value="${item.price}" min="0" required>
                                    </div>
                                    <div style="display: flex; align-items: flex-end;">
                                        <button type="button" class="btn btn-danger btn-icon remove-edit-product-btn" style="padding: 10px;" ${shopping.items.length === 1 ? 'disabled' : ''}>
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button type="button" class="btn btn-primary" id="addEditProductBtn">
                            <i class="fas fa-plus"></i> ‡¶Ü‡¶∞‡¶ì ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó
                        </button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button type="submit" class="btn btn-primary" style="padding: 12px 30px; font-size: 1.1rem;">
                            <i class="fas fa-save"></i> ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                </form>
            `;
            
            editShoppingModal.classList.add('active');
            
            // Add event listeners for edit form
            const editForm = document.getElementById('editShoppingForm');
            const addEditProductBtn = document.getElementById('addEditProductBtn');
            
            editForm.addEventListener('submit', updateShopping);
            
            addEditProductBtn.addEventListener('click', addEditProductRow);
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-edit-product-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const rows = document.querySelectorAll('.edit-product-row');
                    if (rows.length > 1) {
                        this.closest('.edit-product-row').remove();
                    } else {
                        alert('‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá!');
                    }
                });
            });
            
            // Add event listeners to product selects
            document.querySelectorAll('.edit-product-select').forEach(select => {
                select.addEventListener('change', function() {
                    const productId = parseInt(this.value);
                    if (productId) {
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            const unitSelect = this.closest('.edit-product-row').querySelector('.edit-unit');
                            unitSelect.value = product.unit;
                        }
                    }
                });
            });
        }

        // Add product row to edit form
        function addEditProductRow() {
            const container = document.getElementById('editProductsContainer');
            const row = document.createElement('div');
            row.className = 'edit-product-row';
            row.style.marginBottom = '15px';
            row.style.paddingBottom = '15px';
            row.style.borderBottom = '1px solid var(--light-gray)';
            
            row.innerHTML = `
                <div style="display: flex; gap: 10px;">
                    <div style="flex: 2;">
                        <label class="form-label">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                        <select class="form-control edit-product-select" required>
                            <option value="">‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                            ${products.map(product => `<option value="${product.id}">${product.name}</option>`).join('')}
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label>
                        <input type="number" class="form-control edit-quantity" step="0.01" min="0" required>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">‡¶è‡¶ï‡¶ï</label>
                        <select class="form-control edit-unit">
                            <option value="kg">‡¶ï‡ßá‡¶ú‡¶ø</option>
                            <option value="gm">‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
                            <option value="piece">‡¶™‡¶ø‡¶∏</option>
                            <option value="liter">‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞</option>
                        </select>
                    </div>
                    <div style="flex: 1.5;">
                        <label class="form-label">‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ)</label>
                        <input type="number" class="form-control edit-price" min="0" required>
                    </div>
                    <div style="display: flex; align-items: flex-end;">
                        <button type="button" class="btn btn-danger btn-icon remove-edit-product-btn" style="padding: 10px;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(row);
            
            // Add event listener to remove button
            const removeBtn = row.querySelector('.remove-edit-product-btn');
            removeBtn.addEventListener('click', function() {
                const rows = document.querySelectorAll('.edit-product-row');
                if (rows.length > 1) {
                    row.remove();
                } else {
                    alert('‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶•‡¶æ‡¶ï‡¶§‡ßá ‡¶π‡¶¨‡ßá!');
                }
            });
            
            // Add event listener to product select
            const productSelect = row.querySelector('.edit-product-select');
            const unitSelect = row.querySelector('.edit-unit');
            
            productSelect.addEventListener('change', function() {
                const productId = parseInt(this.value);
                if (productId) {
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        unitSelect.value = product.unit;
                    }
                }
            });
        }

        // Update shopping
        function updateShopping(e) {
            e.preventDefault();
            
            // Get shopping data
            const date = document.getElementById('editShoppingDate').value;
            const name = document.getElementById('editShoppingName').value;
            
            // Get product rows
            const productRows = document.querySelectorAll('.edit-product-row');
            const items = [];
            let totalCost = 0;
            
            for (const row of productRows) {
                const productSelect = row.querySelector('.edit-product-select');
                const quantityInput = row.querySelector('.edit-quantity');
                const unitSelect = row.querySelector('.edit-unit');
                const priceInput = row.querySelector('.edit-price');
                
                const productId = parseInt(productSelect.value);
                const product = products.find(p => p.id === productId);
                
                if (!product) {
                    alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                    return;
                }
                
                const quantity = parseFloat(quantityInput.value);
                const unit = unitSelect.value;
                const price = parseFloat(priceInput.value);
                
                if (!quantity || !price) {
                    alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶ì ‡¶¶‡¶æ‡¶Æ ‡¶∏‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®!');
                    return;
                }
                
                items.push({
                    productId,
                    productName: product.name,
                    quantity,
                    unit,
                    price
                });
                
                totalCost += price;
            }
            
            // Find shopping index
            const shoppingIndex = shoppingList.findIndex(s => s.id === currentShoppingId);
            if (shoppingIndex === -1) return;
            
            // Update shopping
            shoppingList[shoppingIndex] = {
                ...shoppingList[shoppingIndex],
                date,
                name,
                items,
                totalCost
            };
            
            // Save to localStorage
            localStorage.setItem('marketShoppingList', JSON.stringify(shoppingList));
            
            // Close modal
            editShoppingModal.classList.remove('active');
            
            // Show success message
            alert('‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            
            // Update dashboard and shopping list
            loadDashboardData();
            loadShoppingList();
        }

        // Delete shopping
        function deleteShopping(id) {
            if (confirm('‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶è‡¶á ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) {
                // Remove from shopping list
                shoppingList = shoppingList.filter(s => s.id !== id);
                
                // Save to localStorage
                localStorage.setItem('marketShoppingList', JSON.stringify(shoppingList));
                
                // Update dashboard and shopping list
                loadDashboardData();
                loadShoppingList();
                
                // Show success message
                alert('‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!');
            }
        }

        // Generate report
        function generateReport() {
            const selectedMonth = reportMonth.value;
            
            if (!selectedMonth) {
                alert('‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶∏ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®!');
                return;
            }
            
            // Filter shopping by selected month
            const monthShopping = shoppingList.filter(s => s.date.startsWith(selectedMonth));
            
            if (monthShopping.length === 0) {
                selectMonthPrompt.style.display = 'none';
                reportContent.style.display = 'block';
                document.getElementById('noReportData').style.display = 'block';
                document.getElementById('reportProductsTable').style.display = 'none';
                
                document.getElementById('reportTotalShopping').textContent = '‡ß¶';
                document.getElementById('reportTotalCost').textContent = '‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ';
                document.getElementById('reportAvgDailyCost').textContent = '‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ';
                
                return;
            }
            
            selectMonthPrompt.style.display = 'none';
            reportContent.style.display = 'block';
            document.getElementById('noReportData').style.display = 'none';
            document.getElementById('reportProductsTable').style.display = 'table';
            
            // Calculate report data
            const totalShopping = monthShopping.length;
            const totalCost = monthShopping.reduce((sum, s) => sum + s.totalCost, 0);
            
            // Get days in month
            const [year, month] = selectedMonth.split('-');
            const daysInMonth = new Date(year, month, 0).getDate();
            const avgDailyCost = totalCost / daysInMonth;
            
            // Update report summary
            document.getElementById('reportTotalShopping').textContent = totalShopping;
            document.getElementById('reportTotalCost').textContent = `${totalCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ`;
            document.getElementById('reportAvgDailyCost').textContent = `${avgDailyCost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ`;
            
            // Calculate product totals for the month
            const productTotals = {};
            
            monthShopping.forEach(shopping => {
                shopping.items.forEach(item => {
                    if (!productTotals[item.productName]) {
                        productTotals[item.productName] = {
                            quantity: 0,
                            cost: 0,
                            unit: item.unit
                        };
                    }
                    
                    // Convert all to kg for comparison
                    let quantityInKg = item.quantity;
                    if (item.unit === 'gm') quantityInKg = item.quantity / 1000;
                    if (item.unit === 'piece' || item.unit === 'liter') quantityInKg = item.quantity; // Keep as is
                    
                    productTotals[item.productName].quantity += quantityInKg;
                    productTotals[item.productName].cost += item.price;
                    productTotals[item.productName].unit = item.unit;
                });
            });
            
            // Convert to array and sort by cost
            const reportProducts = Object.entries(productTotals)
                .map(([name, data]) => ({
                    name,
                    quantity: data.quantity,
                    cost: data.cost,
                    unit: data.unit,
                    avgPrice: data.cost / data.quantity
                }))
                .sort((a, b) => b.cost - a.cost);
            
            // Update report products table
            const reportProductsBody = document.getElementById('reportProductsBody');
            reportProductsBody.innerHTML = reportProducts.map(product => `
                <tr>
                    <td>${product.name}</td>
                    <td>${product.quantity.toFixed(2)} ${getUnitName(product.unit)}</td>
                    <td>${product.cost.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                    <td>${isNaN(product.avgPrice) ? '‡ß¶' : product.avgPrice.toFixed(2)} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                </tr>
            `).join('');
        }

        // Utility functions
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('bn-BD', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function getUnitName(unit) {
            switch(unit) {
                case 'kg': return '‡¶ï‡ßá‡¶ú‡¶ø';
                case 'gm': return '‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ';
                case 'piece': return '‡¶™‡¶ø‡¶∏';
                case 'liter': return '‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞';
                default: return unit;
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
    // Import the functions you need from the SDKs you need


import { initializeApp } from "firebase/app";


import { getAnalytics } from "firebase/analytics";


// TODO: Add SDKs for Firebase products that you want to use


// https://firebase.google.com/docs/web/setup#available-libraries



// Your web app's Firebase configuration


// For Firebase JS SDK v7.20.0 and later, measurementId is optional


const firebaseConfig = {


¬† apiKey: "AIzaSyCc_tMuoC6c4c42nJcKsEUPwmHoxJvo9bA",


¬† authDomain: "maybazershanto.firebaseapp.com",


¬† databaseURL: "https://maybazershanto-default-rtdb.firebaseio.com",


¬† projectId: "maybazershanto",


¬† storageBucket: "maybazershanto.firebasestorage.app",


¬† messagingSenderId: "4149178844",


¬† appId: "1:4149178844:web:efa0a9ffda89c8075adf19",


¬† measurementId: "G-0D60XGY7GM"


};



// Initialize Firebase


const app = initializeApp(firebaseConfig);


const analytics = getA

</body>
</html> eai ato boro code ear app ar code dicilane
